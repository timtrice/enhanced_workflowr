---
title: '`r desc::desc_get_field("Title") `'
site: workflowr::wflow_site
output:
  workflowr::wflow_html:
    toc: false
editor_options:
  chunk_output_type: console
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  echo = TRUE, 
  eval = FALSE
)
```

1. Install packages

```{r install-packages}
install.packages(c("remotes", "usethis", "workflowr"))
```

2. Update .Rprofile

```
options(
  repos = c("https://mran.microsoft.com/snapshot/2019-07-01"),
  usethis.full_name = "Tim Trice",
  usethis.description = list(
    Type = "Compendium",
    Package = "enhanced_workflowr", # -- `usethis` populates from your project name
    Title = "Enhanced Workflowr",
    `Authors@R` = 'person(
      given = "Tim",
      family = "Trice",
      email = "tim.trice@gmail.com",
      role = c("aut", "cre")
    )',
    Description = "A more reproducible workflowr project."
  )
)
```

3. Start workflowr project

```{r start-workflowr}
workflowr::wflow_start(
  directory = ".", 
  name = "Enhanced Workflowr", 
  existing = TRUE,
  user.name = getOption("usethis.full_name"), 
  user.email = desc::desc_get_author()$email
)
```

4. Blank slate.

Do not save the project workspace between sessions.

```{r}
usethis::use_blank_slate(scope = "project")
```

5. Add remote repo

```
git remote add origin https://github.com/timtrice/enhanced_workflowr.git
```

6. Create **./code/01_setup.R** script

When changes are made that introduce new packages, you can rerun the setup 
script that will rebuild the DESCRIPTION without having to go through the steps 
manually (or forgetting). 

```{r code-setup, code = readLines(here::here("./code/01_setup.R")), eval = FALSE}
```

  * description - Writes compendium description. This is interactive.
  
  * license - Add license. See `?usethis::use_mit_license` for other options.
  
  * github-repo - Add repo URL and BugReports to DESCRIPTION
  
  * move-holepunch - `holepunch` will be listed under Depends. It is not yet 
    available on CRAN so this will generate an error. We have to move it to 
    Remotes and add the repo to Imports. 
    
  * holepunch-write-dockerfile - `holepunch` will create the Dockerfile used by 
    [binder](https://gke.mybinder.org/). 
    
7. holepunch > write Dockerfile

```{r write-dockerfile}
holepunch::write_dockerfile(maintainer = creator, r_date = "2019-07-01")
```

8. Travis

  * Connect [Travis](https://travis-ci.org/dashboard) to your repository
  
  * Create travis script

```{r travis, comment = "", eval = TRUE}
cat(readLines(here::here("./.travis.yml")), sep = "\n")
```

The script will run `holepunch::build_binder` after a successful build which should trigger a binder build in advance of use.

9. Enable Docker automated building

[Create Repository](https://cloud.docker.com/repository/create)

<center>[![Docker automation](./assets/docker_automated_build.png)]</center>

Click "Create"

10. Create Dockerfile

```{r docker-hub-dockerfile, comment = "", eval = TRUE}
cat(readLines(here::here("./Dockerfile")), sep = "\n")
```

11. Point docs directory to GitHub pages or Netlify

12. Add CONTRIBUTING

```{r}
usethis::use_tidy_contributing()
```

13. Code of Conduct

```{r}
usethis::use_tidy_coc()
```

14. Issues Template

```{r}
usethis::use_tidy_issue_template()
```

15. Support

```{r}
usethis::use_tidy_support()
```

Double-check the repo URL at line 23 in [SUPPORT](./github/SUPPORT.md). As of `usethis` release 1.5.1.9000 it currently points to the tidyverse repo. See [#166](https://github.com/r-lib/usethis/issues/166) for more info.

16. Author

Change author in README.
